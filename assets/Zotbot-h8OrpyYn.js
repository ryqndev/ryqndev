import{r as i,j as u}from"./index-lCl7v7HW.js";import{C as U,G as I}from"./GLTFLoader-iKApPePH.js";import{RigidBody as j}from"./react-three-rapier.esm-JoK89KVn.js";import{u as R,a as S}from"./index-0c28a0fd.esm-pXf_Z0Nn.js";import{u as T}from"./KeyboardControls-GBqFUTb9.js";import{u as w}from"./useGLTF-EKpmjdbN.js";import"./extends-dGVwEr9R.js";let p;const D=new Uint8Array(16);function F(){if(!p&&(p=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!p))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return p(D)}const n=[];for(let t=0;t<256;++t)n.push((t+256).toString(16).slice(1));function L(t,o=0){return n[t[o+0]]+n[t[o+1]]+n[t[o+2]]+n[t[o+3]]+"-"+n[t[o+4]]+n[t[o+5]]+"-"+n[t[o+6]]+n[t[o+7]]+"-"+n[t[o+8]]+n[t[o+9]]+"-"+n[t[o+10]]+n[t[o+11]]+n[t[o+12]]+n[t[o+13]]+n[t[o+14]]+n[t[o+15]]}const M=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),g={randomUUID:M};function v(t,o,c){if(g.randomUUID&&!o&&!t)return g.randomUUID();t=t||{};const e=t.random||(t.rng||F)();if(e[6]=e[6]&15|64,e[8]=e[8]&63|128,o){c=c||0;for(let s=0;s<16;++s)o[c+s]=e[s];return o}return L(e)}const x="/assets/delivery_robot/zotbot.gltf",a=(t,o)=>Math.random()*(o-t)+t,b=()=>({id:v(),position:[a(-60,60),a(100,200),a(-60,60)],rotation:[a(0,Math.PI),a(0,Math.PI),a(0,Math.PI)],ref:i.createRef()}),B=t=>new Array(t).fill(0).map(b),A=i.memo(function(){const{scene:o}=R(I,x),[c,e]=i.useState(()=>B(4)),s=i.useCallback(()=>{e(r=>[...r,b()])},[]),[h]=T();return i.useEffect(()=>h(r=>r,({SPAWN:r})=>r&&s()),[]),S(()=>{e(r=>r.filter(l=>{var d,m,y;return((y=(m=(d=l.ref)==null?void 0:d.current)==null?void 0:m.parent)==null?void 0:y.position.y)>-300}))}),u.jsxs(i.Suspense,{fallback:null,children:[c.map(({id:r,position:l,rotation:d,ref:m})=>u.jsx(j,{position:l,rotation:d,restitution:1.5,colliders:"cuboid",children:u.jsx(U,{object:o,scale:1,rotation:[Math.PI/2,0,0],ref:m})},r)),u.jsx(u.Fragment,{})]})});w.preload(x);export{A as Zotbot};
