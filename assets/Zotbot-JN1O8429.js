import{r as a,j as u}from"./index-tgmMlaxD.js";import{C as I,G as j}from"./GLTFLoader-d5qVak6p.js";import{RigidBody as R}from"./react-three-rapier.esm-qMkUkHyQ.js";import{r as i}from"./utils-PXv1eko7.js";import{u as S,a as T}from"./index-0c28a0fd.esm-aDRZzFWR.js";import{u as w}from"./KeyboardControls-ZlrKl6Zk.js";import{u as D}from"./useGLTF-gVQl13y0.js";import"./extends-dGVwEr9R.js";let p;const F=new Uint8Array(16);function L(){if(!p&&(p=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!p))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return p(F)}const n=[];for(let t=0;t<256;++t)n.push((t+256).toString(16).slice(1));function v(t,o=0){return n[t[o+0]]+n[t[o+1]]+n[t[o+2]]+n[t[o+3]]+"-"+n[t[o+4]]+n[t[o+5]]+"-"+n[t[o+6]]+n[t[o+7]]+"-"+n[t[o+8]]+n[t[o+9]]+"-"+n[t[o+10]]+n[t[o+11]]+n[t[o+12]]+n[t[o+13]]+n[t[o+14]]+n[t[o+15]]}const B=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),x={randomUUID:B};function C(t,o,c){if(x.randomUUID&&!o&&!t)return x.randomUUID();t=t||{};const e=t.random||(t.rng||L)();if(e[6]=e[6]&15|64,e[8]=e[8]&63|128,o){c=c||0;for(let s=0;s<16;++s)o[c+s]=e[s];return o}return v(e)}const b="/assets/delivery_robot/zotbot.gltf",U=()=>({id:C(),position:[i(-60,60),i(100,200),i(-60,60)],rotation:[i(0,Math.PI),i(0,Math.PI),i(0,Math.PI)],ref:a.createRef()}),E=t=>new Array(t).fill(0).map(U),_=a.memo(function(){const{scene:o}=S(j,b),[c,e]=a.useState(()=>E(4)),s=a.useCallback(()=>{e(r=>[...r,U()])},[]),[h]=w();return a.useEffect(()=>h(r=>r,({SPAWN:r})=>r&&s()),[]),T(()=>{e(r=>r.filter(l=>{var d,m,y,g;return((g=(y=(m=(d=l.ref)==null?void 0:d.current)==null?void 0:m.parent)==null?void 0:y.position)==null?void 0:g.y)>-300}))}),u.jsxs(a.Suspense,{fallback:null,children:[c.map(({id:r,position:l,rotation:d,ref:m})=>u.jsx(R,{position:l,rotation:d,restitution:1.5,colliders:"cuboid",children:u.jsx(I,{object:o,scale:1,rotation:[Math.PI/2,0,0],ref:m})},r)),u.jsx(u.Fragment,{})]})});D.preload(b);export{_ as Zotbot};
